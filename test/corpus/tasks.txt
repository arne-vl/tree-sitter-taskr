============
Minimal task
============

task build:
  run = tree-sitter build

---

(source_file
  (task
    (kw_task)
    (identifier)
    (run_definition
      (run_key)
      (command))))

=========
Full task
=========

task build:
  desc  = builds the tree-sitter
  run   = tree-sitter build
  alias = b
  needs = nothing

---

(source_file
  (task
    (kw_task)
    (identifier)
    (desc_definition
      (desc_key)
      (text))
    (run_definition
      (run_key)
      (command))
    (alias_definition
      (alias_key)
      (list
        (identifier)))
    (needs_definition
      (needs_key)
      (list
        (identifier)))))

===========================
Task with description first
===========================

task build:
  desc = builds tree sitter
  run  = tree-sitter build

---

(source_file
  (task
    (kw_task)
    (identifier)
    (desc_definition
      (desc_key)
      (text))
    (run_definition
      (run_key)
      (command))))

==============
Task with list
==============

task build:
  run = tree-sitter build
  alias = bld, b, bu

---

(source_file
  (task
    (kw_task)
    (identifier)
    (run_definition
      (run_key)
      (command))
    (alias_definition
      (alias_key)
      (list
        (identifier)
        (identifier)
        (identifier)))))

=================
Task without keys
=================

task build:

---

(source_file
  (ERROR
    (kw_task)
    (identifier)))

=========================
Task without required key
=========================

task build:
  desc = builds the tree sitter parser

---

(source_file
  (ERROR
    (kw_task)
    (identifier)
    (desc_definition
      (desc_key)
      (text))))

===================
Task with empty key
===================

task build:
  run =

---

(source_file
  (task
    (kw_task)
    (identifier)
    (run_definition
      (run_key)
      (command
        (MISSING "anything_token1")))))

=======================
Task with / and comment
=======================

task build:
  run = ./build.sh // executes build script

---

(source_file
  (task
    (kw_task)
    (identifier)
    (run_definition
      (run_key)
      (command)))
    (comment))

==================================
Task with task in install and desc
==================================

task test:
  desc = test taskr
  run = test taskr

---

(source_file
  (task
    (kw_task)
    (identifier)
    (desc_definition
      (desc_key)
      (text))
    (run_definition
      (run_key)
      (command))))

==================================
Task with task in desc and install
==================================

task test:
  run = test taskr
  desc = test taskr

---

(source_file
  (task
    (kw_task)
    (identifier)
    (run_definition
      (run_key)
      (command))
    (desc_definition
      (desc_key)
      (text))))
